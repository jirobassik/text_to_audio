{% extends 'layout_audio.html' %}
{% load static %}
{% load custom_tag %}

{% block content_main %}
    <h1>История</h1>
    <form action="{% url 'history-search' %}" method="get">
        <label>
            <input name="input_query" type="text" placeholder="Введите запрос">
            <button>Search</button>
        </label>
    </form>
    <table>
        <thead>
        <tr>
            <th>Озвученный текст (text)</th>
            <th>Результат озвучивания (audio_file)</th>
            <th>Используемый голос (use_vote)</th>
            <th>Время добавления (time_add)</th>
        </tr>
        </thead>
        <tbody>
        {% for entry in history_entries %}
            <tr>
                <td>{{ entry.text }}</td>
                <td>
                    <audio controls>
                        <source src="{{ entry.audio_file.url }}" type="audio/mpeg">
                        Your browser does not support the audio element.
                    </audio>
                </td>
                <td><a href="{% url 'vote-view' %}" class="nav-link"
                       data-id="{{ entry.use_vote_id }}">{{ entry.use_vote }} </a></td>
                <td>{{ entry.time_add }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

{% endblock %}